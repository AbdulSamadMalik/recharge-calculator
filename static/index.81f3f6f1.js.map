{"version":3,"file":"index.81f3f6f1.js","sources":["../../vite/modulepreload-polyfill","../../src/helpers/logger.ts","../../src/utils/dom.ts","../../src/utils/common.ts","../../src/helpers/PersistedSubject.ts","../../src/main.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export class Logger {\n   enabled = import.meta.env.DEV;\n   log(...args: any[]) {\n      this.enabled && console.log(...['[log]', ...args]);\n   }\n   info(...args: any[]) {\n      this.enabled && console.info(...['[info]', ...args]);\n   }\n   warn(...args: any[]) {\n      this.enabled && console.warn(...['[warn]', ...args]);\n   }\n   error(...args: any[]) {\n      this.enabled && console.error(...['[error]', ...args]);\n   }\n}\n\nexport default new Logger();\n","import logger from '../helpers/logger';\n\nexport function $<T extends HTMLElement>(selector: string): T {\n   return document.querySelector<T>(selector)!;\n}\n\nexport function $$<T extends HTMLElement>(selector: string): T[] {\n   return Array.from(document.querySelectorAll(selector));\n}\n\nexport function conditionalClass(\n   element: HTMLElement,\n   condition: boolean,\n   className: string\n) {\n   try {\n      if (condition === true) {\n         element.classList.add(className);\n      } else if (condition === false) {\n         element.classList.remove(className);\n      }\n   } catch (error) {\n      logger.error(error);\n   }\n}\n","import logger from '../helpers/logger';\n\nexport function NaN(...args: any[]) {\n   return !args.every((arg) => !window.isNaN(arg));\n}\n\nexport function truthyNo(...args: any[]) {\n   return !args.every((no) => !window.isNaN(no) && no <= 0);\n}\n\nexport function createObjectURL(source: File | Blob | string | null) {\n   function _createURL(source: any) {\n      if (URL) return URL.createObjectURL(source);\n      return webkitURL.createObjectURL(source);\n   }\n\n   if (source instanceof File || source instanceof Blob) {\n      return _createURL(source);\n   } else if ('string' == typeof source) {\n      return _createURL(new Blob([source], { type: 'text/plain' }));\n   }\n\n   logger.error('Not a file or blob');\n   return _createURL(new Blob([]));\n}\n\nexport function prefersDarkTheme() {\n   if (!window.matchMedia) return false;\n   return window.matchMedia('(prefers-color-scheme: dark)').matches;\n}\n\nexport function preventAnchorReload(event: MouseEvent) {\n   if (!event.shiftKey && !event.ctrlKey && !event.metaKey && !event.altKey) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n   }\n}\n\n/**\n * Returns a promise which resolves after `T` seconds.\n */\nexport function asyncTimer(T: number): Promise<void> {\n   return new Promise((resolve) => setTimeout(resolve, T));\n}\n","import { BehaviorSubject } from 'rxjs';\nimport logger from './logger';\n\nfunction getStoredValue<A, B = Object>(\n   id: string,\n   defaultValue: A,\n   object?: B,\n   key?: keyof B\n): A {\n   try {\n      const stored: any = localStorage.getItem(id);\n      if (stored) {\n         const { value } = JSON.parse(stored);\n         if (object && key) object[key] = value as any;\n         return value;\n      }\n      return defaultValue;\n   } catch (error) {\n      return defaultValue;\n   }\n}\n\nexport class PersistedSubject<A, B = Object> extends BehaviorSubject<A> {\n   constructor(public id: string, value: A, object?: B, key?: keyof B) {\n      const val = getStoredValue(id, value, object, key);\n      super(val);\n   }\n\n   next(value: A) {\n      super.next(value);\n      try {\n         localStorage.setItem(this.id, JSON.stringify({ value }));\n      } catch (error: any) {\n         logger.error(error.message);\n      }\n   }\n}\n","import { fromEvent, merge } from 'rxjs';\nimport { $, $$, conditionalClass, NaN, truthyNo } from './utils';\nimport { PersistedSubject } from './helpers/PersistedSubject';\nimport './styles/main.scss';\n\nconst form = $('form');\nconst valueOutput = $('#value-output');\nconst valueBanner = $('.recharge-value');\n\nconst costInput = $('#cost') as HTMLInputElement;\nconst dataInput = $('#data') as HTMLInputElement;\nconst daysInput = $('#days') as HTMLInputElement;\n\nconst submitButton = $('button.submit') as HTMLButtonElement;\n\nexport function getValues() {\n   return {\n      cost: costInput.valueAsNumber,\n      data: dataInput.valueAsNumber,\n      validity: daysInput.valueAsNumber,\n   };\n}\n\nconst cost$ = new PersistedSubject('cost', 0, costInput, 'value');\nconst data$ = new PersistedSubject('data', 0, dataInput, 'value');\nconst validity$ = new PersistedSubject('days', 0, daysInput, 'value');\n\nmerge(cost$, data$, validity$).subscribe(setRechargeValue);\n\nfunction setRechargeValue() {\n   const { cost, data, validity } = getValues();\n\n   function setOutputClass(className: string) {\n      form.className = `form ${className}`;\n      valueOutput.className = `value-output block ${className}`;\n   }\n\n   const isNaN = NaN(cost, data, validity) || !truthyNo(data);\n\n   conditionalClass(valueBanner, isNaN, 'hidden');\n   conditionalClass(submitButton, !isNaN, 'hidden');\n\n   if (!isNaN) {\n      const calc = ((data * validity) / cost) * 100;\n      const result = parseFloat(calc.toFixed(2));\n\n      if (result >= 80 || result == Infinity) setOutputClass('green');\n      if (result <= 80) setOutputClass('purple');\n      if (result <= 60) setOutputClass('yellow');\n      if (result <= 40) setOutputClass('orange');\n      if (result <= 20 || result == -Infinity) setOutputClass('red');\n\n      valueOutput.textContent = result.toString();\n   }\n}\n\nfunction setValue(event: Event, observable: PersistedSubject<number>) {\n   const target = event.target as HTMLInputElement;\n\n   if (target.valueAsNumber < 0)\n      target.value = Math.abs(target.valueAsNumber).toString();\n   return observable.next(target.valueAsNumber);\n}\n\nfromEvent(costInput, 'input').subscribe((e) => setValue(e, cost$));\nfromEvent(dataInput, 'input').subscribe((e) => setValue(e, data$));\nfromEvent(daysInput, 'input').subscribe((e) => setValue(e, validity$));\n\n$$<HTMLInputElement>('input').forEach((input) => {\n   input.addEventListener('focus', () => input?.select());\n   input.addEventListener('contextmenu', (e) => e.preventDefault());\n});\n\nform.addEventListener('submit', (event) => event.preventDefault());\n"],"names":[],"mappings":"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"}